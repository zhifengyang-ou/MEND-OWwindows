# MEND model for simulating 20-year Rh responses

The MEND model is deisigned to simulate soil C-N transformation and 20-year Rh dynamics in a warming experiment. The code is inside src/ while input and output data is inside userio/. 


## System requirements
You need to install gfortran, make sure the gfortran is in the PATH variable. To run the script, also a python is required. Current default running environment is windows.

## Usage
To use MEND to do simulation or optimization, you could run

or run a script that could store the namelist information into the output folder as well as some log information. The major setting of model parameterization and input/output is inside /MEND_namelist.nml file and MEND_Readme_2019.pdf provides detailed instructions.
```
python pipeline.py "some log information here"
```

## Introduction to file system
It needs a input folder (i.e., MEND-NWS/userio/inp_UC) storing required file to run the model and a namelist information (i.e., MEND_namelist.nml) for the model setting (i.e, if doing simulation or optimization, or calibrated variables). And the output folder is generated by the program automatically (i.e., MEND/userio/out/xxxx). Here the folder provides a namelist for optimzation for Control (U_N_N). For calibration namelist for all treatments are stored in /namelist files folders, just copy the content inside corresponding namelist files and run the python command above. 

## Demo
Current MEND.namelist provides a simulation under Control condition (UC: unclip, unwarm). Run above script will generate the output folders in userio.
Expected output contains simulated fluxes, pool size, and input forcing variables over time.
Expected time: 1-2 min

For optimization, it will typically take more than 30 min, depending on how many cycles the optimization runs.







